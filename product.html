<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Product details - Wasam.store">
    <title>Product Details | Wasam.store</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/png" href="assets/logo.png">
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="header-main">
            <a href="index.html" class="logo">
                <img src="assets/logo.png" alt="Wasam.Pick - Honest Finds">
            </a>
            <div class="search-container">
                <div class="search-bar">
                    <input type="text" id="searchInput" placeholder="Search products..." autocomplete="off">
                    <button type="button" id="searchBtn" aria-label="Search">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="11" cy="11" r="8" />
                            <line x1="21" y1="21" x2="16.65" y2="16.65" />
                        </svg>
                    </button>
                </div>
            </div>
            <div class="header-actions">
                <button class="globe-btn" id="globeBtn">ðŸŒŽ
                    <div class="country-dropdown" id="countryDropdown">
                        <a href="#" data-country="US">ðŸ‡ºðŸ‡¸ United States</a>
                        <a href="#" data-country="CA">ðŸ‡¨ðŸ‡¦ Canada</a>
                        <a href="#" data-country="GB">ðŸ‡¬ðŸ‡§ United Kingdom</a>
                        <a href="#" data-country="DE">ðŸ‡©ðŸ‡ª Germany</a>
                        <a href="#" data-country="FR">ðŸ‡«ðŸ‡· France</a>
                    </div>
                </button>
                <a href="contact.html" class="btn btn-primary"><span>Join Our Team</span></a>
                <a href="login.html" class="btn btn-outline"><span>Login</span></a>
            </div>
        </div>
    </header>

    <!-- Product Detail -->
    <section class="product-detail">
        <div class="product-detail-container">
            <!-- Quick Nav -->
            <nav
                style="margin-bottom: 20px; display: flex; gap: 15px; flex-wrap: wrap; padding-bottom: 15px; border-bottom: 1px solid #eee;">
                <a href="products.html?category=Electronics"
                    style="text-decoration: none; color: #4B5563; font-weight: 500;">Electronics</a>
                <a href="products.html?category=Home"
                    style="text-decoration: none; color: #4B5563; font-weight: 500;">Home & Kitchen</a>
                <a href="products.html?category=Fashion"
                    style="text-decoration: none; color: #4B5563; font-weight: 500;">Fashion</a>
                <a href="products.html?category=Beauty"
                    style="text-decoration: none; color: #4B5563; font-weight: 500;">Beauty</a>
                <a href="products.html?category=Health"
                    style="text-decoration: none; color: #4B5563; font-weight: 500;">Health</a>
                <a href="products.html" style="text-decoration: none; color: #8B5CF6; font-weight: 600;">All
                    Products</a>
            </nav>

            <!-- Breadcrumb -->
            <nav class="breadcrumb">
                <a href="index.html">Home</a>
                <span>â€º</span>
                <a href="products.html">Products</a>
                <span>â€º</span>
                <span id="breadcrumbCategory">Category</span>
            </nav>

            <div class="product-detail-grid">
                <div class="product-gallery">
                    <img id="productImage" src="" alt="Product Image">
                </div>

                <!-- Product Info -->
                <div class="product-detail-info">
                    <span class="product-category" id="productCategory"></span>
                    <h1 id="productTitle">Loading product...</h1>
                    <p class="product-detail-price" id="productPrice"></p>
                    <p class="product-detail-description">This premium quality product has been carefully selected based
                        on customer reviews, quality ratings, and value for money. Click the button below to view the
                        full product details and current pricing on Amazon.</p>

                    <a href="#" class="amazon-btn" id="amazonLink" target="_blank" rel="noopener noreferrer">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" />
                        </svg>
                        Check Price on Amazon
                    </a>

                    <!-- Affiliate Disclosure -->
                    <div class="product-disclosure">
                        <strong>Affiliate Disclosure:</strong> We participate in affiliate marketing programs and may
                        earn a commission from qualifying purchases at no additional cost to you. Product availability
                        is subject to change.
                    </div>
                </div>
            </div>

            <!-- Related Products -->
            <section class="products-section" style="padding: 40px 0;">
                <div class="section-header">
                    <h2 class="section-title">Related Products</h2>
                </div>
                <div class="products-grid" id="relatedProducts"></div>
            </section>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-top">
                <div class="footer-brand">
                    <img src="assets/logo.png" alt="Wasam.Pick">
                    <p>Your trusted source for quality products.</p>
                </div>
                <div class="footer-links">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="products.html">All Products</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="contact.html">Contact Us</a></li>
                    </ul>
                </div>
                <div class="footer-links">
                    <h4>Legal</h4>
                    <ul>
                        <li><a href="terms.html">Terms & Conditions</a></li>
                        <li><a href="privacy.html">Privacy Policy</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-disclosure">
                <p><strong>Affiliate Disclosure:</strong> We participate in affiliate marketing programs and may earn a
                    commission from qualifying purchases at no additional cost to you. Product availability is subject
                    to change.</p>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 wasam.store. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="js/products.js"></script>
    <script src="js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Get product ID from URL
            const params = new URLSearchParams(window.location.search);
            const productId = params.get('id');

            function renderProductDetails() {
                const product = getProductById(productId);

                if (product) {
                    // Update page content
                    document.title = `${product.title} | Wasam.store`;
                    document.getElementById('productTitle').textContent = product.title;
                    document.getElementById('productPrice').textContent = `$${product.price.toFixed(2)}`;
                    document.getElementById('productCategory').textContent = product.subcategory || product.category;
                    document.getElementById('productImage').src = product.image;
                    document.getElementById('productImage').alt = product.title;
                    document.getElementById('breadcrumbCategory').textContent = product.category;

                    // Update description
                    const descEl = document.querySelector('.product-detail-description');
                    if (product.description) {
                        descEl.innerHTML = product.description;
                    } else {
                        descEl.textContent = 'Loading product details...';
                        // Use relative path for production compatibility
                        fetch(`/api/product?asin=${product.id}`)
                            .then(res => res.json())
                            .then(data => {
                                if (data.data && (data.data.product_description || data.data.about_product)) {
                                    const description = data.data.product_description ||
                                        (Array.isArray(data.data.about_product) ?
                                            `<ul>${data.data.about_product.map(p => `<li>${p}</li>`).join('')}</ul>` : '');
                                    product.description = description;
                                    descEl.innerHTML = description;
                                } else {
                                    descEl.textContent = 'Full description not available. Please check details on Amazon.';
                                }
                            })
                            .catch(err => {
                                console.error(err);
                                descEl.textContent = 'Description unavailable.';
                            });
                    }

                    // Amazon link logic
                    const amazonLink = document.getElementById('amazonLink');
                    if (product.amazon_url) {
                        amazonLink.href = product.amazon_url;
                        amazonLink.innerHTML = `
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" />
            </svg>
            Buy Now
            `;
                    } else {
                        // Fallback to search
                        amazonLink.href = `https://www.amazon.com/dp/${product.id}`;
                        amazonLink.innerHTML = `
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M17 9c0-.55.45-1 1-1s1 .45 1 1v6c0 .55-.45 1-1 1s-1-.45-1-1V9zm-4-2c0-.55.45-1 1-1s1 .45 1 1v8c0 .55-.45 1-1 1s-1-.45-1-1V7zm-4 4c0-.55.45-1 1-1s1 .45 1 1v4c0 .55-.45 1-1 1s-1-.45-1-1v-4z" />
                <path fill="none" d="M0 0h24v24H0z" />
            </svg>
            Check Price on Amazon
            `;
                    }

                    // Load related products
                    const related = getRelatedProducts(product, 4);
                    document.getElementById('relatedProducts').innerHTML = related.map(p => createProductCard(p)).join('');
                } else {
                    document.getElementById('productTitle').textContent = 'Product not found';
                    document.getElementById('productPrice').textContent = '';
                    document.querySelector('.amazon-btn').style.display = 'none';
                }
            }

            // Check if products are already loaded (array populated from products.js)
            if (typeof allProducts !== 'undefined' && allProducts.length > 0) {
                renderProductDetails();
            } else {
                // Wait for the custom event from products.js
                window.addEventListener('productsLoaded', renderProductDetails);
            }
        });
    </script>
</body>

</html>